# æ¯å‘¨ç”µå½± Home Assistant é›†æˆ

[![hacs_badge](https://img.shields.io/badge/HACS-Custom-orange.svg)](https://github.com/hacs/integration)

è¿™æ˜¯ä¸€ä¸ªç”¨äº Home Assistant çš„è‡ªå®šä¹‰é›†æˆï¼Œå¯ä»¥è·å–å†…åœ°å³å°†ä¸Šæ˜ çš„ç”µå½±ä¿¡æ¯ï¼Œå¹¶ä»¥æ»šåŠ¨æ–¹å¼å±•ç¤ºã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ¬ è·å–å†…åœ°å³å°†ä¸Šæ˜ çš„ç”µå½±ä¿¡æ¯
- â° 24å°æ—¶è‡ªåŠ¨æ›´æ–°æ•°æ®
- ğŸ”„ å¯é…ç½®çš„æ»šåŠ¨æ˜¾ç¤ºï¼ˆé»˜è®¤æ¯åˆ†é’Ÿåˆ‡æ¢ä¸€éƒ¨ç”µå½±ï¼‰
- ğŸ“± æ”¯æŒä¸­æ–‡æœ¬åœ°åŒ–ç•Œé¢
- ğŸ–¼ï¸ æ˜¾ç¤ºç”µå½±æµ·æŠ¥å’Œè¯¦ç»†ä¿¡æ¯
- ğŸ“Š ä¸¤ä¸ªå®ä½“ï¼šæ•°æ®å®ä½“å’Œæ»šåŠ¨æ˜¾ç¤ºå®ä½“

## å®‰è£…

### é€šè¿‡ HACS å®‰è£…ï¼ˆæ¨èï¼‰

1. ç¡®ä¿å·²å®‰è£… [HACS](https://hacs.xyz/)
2. åœ¨ HACS ä¸­ç‚¹å‡»ã€Œé›†æˆã€
3. ç‚¹å‡»å³ä¸‹è§’ã€Œ+ æµè§ˆå¹¶ä¸‹è½½å­˜å‚¨åº“ã€
4. æœç´¢ã€Œæ¯å‘¨ç”µå½±ã€æˆ–æ·»åŠ è‡ªå®šä¹‰å­˜å‚¨åº“ï¼š
   - å­˜å‚¨åº“ï¼š`https://github.com/lambilly/hass_weekly_film`
   - ç±»åˆ«ï¼šé›†æˆ
5. ä¸‹è½½ã€Œæ¯å‘¨ç”µå½±ã€é›†æˆ
6. é‡å¯ Home Assistant

### æ‰‹åŠ¨å®‰è£…

1. å°† `weekly_film` æ–‡ä»¶å¤¹å¤åˆ¶åˆ° `custom_components` ç›®å½•
2. é‡å¯ Home Assistant
3. åœ¨é›†æˆç•Œé¢æ·»åŠ ã€Œæ¯å‘¨ç”µå½±ã€

## é…ç½®

### åˆå§‹é…ç½®

1. åœ¨ Home Assistant ä¸­è¿›å…¥ã€Œé…ç½®ã€->ã€Œè®¾å¤‡ä¸æœåŠ¡ã€
2. ç‚¹å‡»ã€Œ+ æ·»åŠ é›†æˆã€
3. æœç´¢ã€Œæ¯å‘¨ç”µå½±ã€
4. è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **API Key**: ä»å†·è¨€æ•°æ®ç”³è¯·ï¼ˆè§ä¸‹æ–‡ï¼‰
   - **æ»šåŠ¨é—´éš”**: ç”µå½±åˆ‡æ¢é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤60ç§’

### API Key ç”³è¯·

1. è®¿é—® [å†·è¨€æ•°æ®](https://qqlykm.cn/)
2. æ³¨å†Œè´¦å·å¹¶ç™»å½•
3. åœ¨APIå¸‚åœºä¸­æ‰¾åˆ°ã€Œå†…åœ°å³å°†ä¸Šæ˜ çš„ç”µå½±ã€å…è´¹API
4. ç”³è¯·è·å– API Key
5. å°†è·å¾—çš„ API Key å¡«å…¥é›†æˆé…ç½®ä¸­

### é€‰é¡¹é…ç½®

é›†æˆå®‰è£…åï¼Œå¯ä»¥åœ¨é›†æˆé€‰é¡¹ä¸­è¿›è¡Œé…ç½®ï¼š
- **æ»šåŠ¨é—´éš”**: è°ƒæ•´ç”µå½±ä¿¡æ¯åˆ‡æ¢çš„é¢‘ç‡

## ç”Ÿæˆçš„å®ä½“

é›†æˆä¼šåˆ›å»ºä¸€ä¸ªè®¾å¤‡ï¼ŒåŒ…å«ä¸¤ä¸ªå®ä½“ï¼š

### 1. æ¯å‘¨ç”µå½±æ•°æ®
- **çŠ¶æ€**: æœ€åæ›´æ–°æ—¶é—´
- **å±æ€§**:
  - `film_count`: ç”µå½±æ•°é‡
  - `film_list`: å®Œæ•´çš„ç”µå½±åˆ—è¡¨
  - `update_time`: æ›´æ–°æ—¶é—´

### 2. æ¯å‘¨ç”µå½±æ»šåŠ¨æ˜¾ç¤º
- **çŠ¶æ€**: å½“å‰æ˜¾ç¤ºçš„ç”µå½±åç§°å’Œæ—¥æœŸ
- **å±æ€§**:
  - `name`: ç”µå½±åç§°
  - `type`: ç”µå½±ç±»å‹
  - `director`: å¯¼æ¼”
  - `actors`: ä¸»æ¼”
  - `picurl`: æµ·æŠ¥å›¾ç‰‡URL
  - `releasedatestr`: ä¸Šæ˜ æ—¥æœŸ
  - `poster`: HTMLæ ¼å¼çš„æµ·æŠ¥å›¾ç‰‡

## ä½¿ç”¨ç¤ºä¾‹

### Lovelace å¡ç‰‡é…ç½®ï¼Œéœ€è¦åœ¨HACSå®‰è£…ï¼šLovelace HTML Jinja2 Template card å¡ç‰‡

```yaml
type: custom:html-template-card
content: >
  <div style="color: white;"><p align="left"><h3>ã€ğŸ¬æ¯å‘¨ç”µå½±ã€‘</h3></p><div
  style="display: flex; align-items: flex-start;"><div style="flex: 0 0 150px;
  margin-right: 15px;"><img src="{{ state_attr('sensor.gun_dong_xian_shi',
  'picurl') }}" width="150" style="border-radius: 5px;"></div> <div
  style="flex: 1;">
        å½±ç‰‡ï¼š{{ state_attr('sensor.gun_dong_xian_shi', 'name') }}<br>
        ç±»å‹ï¼š{{ state_attr('sensor.gun_dong_xian_shi', 'type') }}<br>
        å¯¼æ¼”ï¼š{{ state_attr('sensor.gun_dong_xian_shi', 'director') }}<br>
        æ¼”å‘˜ï¼š{{ state_attr('sensor.gun_dong_xian_shi', 'actors') }}<br>
        ä¸Šæ˜ ï¼š{{ state_attr('sensor.gun_dong_xian_shi', 'release_date') }}</div></div></div>

```
## æ•…éšœæ’é™¤
### å¸¸è§é—®é¢˜
1.	API é”™è¯¯: æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ç”³è¯·çš„æ˜¯ã€Œå†…åœ°å³å°†ä¸Šæ˜ çš„ç”µå½±ã€API
2.	æ— æ•°æ®æ˜¾ç¤º: ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸ï¼ŒAPIæœåŠ¡å¯ç”¨
3.	æ»šåŠ¨ä¸å·¥ä½œ: æ£€æŸ¥æ»šåŠ¨é—´éš”è®¾ç½®ï¼Œé‡å¯é›†æˆ

## æ—¥å¿—è°ƒè¯•
å¦‚éœ€æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Œåœ¨ configuration.yaml ä¸­æ·»åŠ ï¼š

```yaml
logger:
  default: info
  logs:
    custom_components.weekly_film: debug
```
## æ”¯æŒ
å¦‚é‡é—®é¢˜ï¼Œè¯·ï¼š
1.	æŸ¥çœ‹ Home Assistant æ—¥å¿—
2.	ç¡®è®¤ API Key æœ‰æ•ˆ
3.	æ£€æŸ¥ç½‘ç»œè¿æ¥

## è®¸å¯è¯
MIT License

## è´¡çŒ®
æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
